a.locations like '%~$location_id~%' and
		$subquery = '';
		// if not unisex search based on gender otherwise leave it blank
		if($gender != '')
		{
			$subquery = " a.gender = '$gender' and";
		}
		$sql = "select distinct a.id from staffs a, job_staff b
				where a.id = b.staff_id and a.state=$ven_state and";
		$sql .= $subquery;
		$sql1=$sql;
	    /*$sql .= 	" a.group like '%~$position~%' and
					a.status like '%approved%' and
					a.locations like '%~$location_id~%' and
					b.venue_id = '$venue_id' and					
					(a.availability = '1' or a.availability = '$orderday') and
					a.id not in (
						select c.staff_id from job_staff c where c.job_calendar_id = '$job_calendar_id' and (c.response like '%Y%' or c.response ='')
					) and
					a.id not in (
						select c.staff_id from job_staff c where ((c.starttime_num>='$starttime' and c.starttime_num<='$endtime') or (c.endtime_num>='$starttime' and c.endtime_num<='$endtime') or (c.starttime_num<='$starttime' and c.endtime_num>='$endtime')) and c.day ='$day' and c.month = '$month' and c.year ='$year' and (c.response like '%Y%' or c.response ='')
					) and					
					a.id in(
						select c.staff_id from staff_client_venue c where c.venue_id ='$venue_id' and c.flag=1
					)
						
					";			*/
		$sql .= 	" a.group like '%~$position~%' and
					a.status like '%approved%' and
					
					b.venue_id = '$venue_id' and					
					(a.availability = '1' or a.availability = '$orderday') and
					a.id not in (
						select c.staff_id from job_staff c where c.job_calendar_id = '$job_calendar_id' and (c.response like '%Y%' or c.response ='')
					) and
					a.id not in (
						select c.staff_id from job_staff c where ((c.starttime_num>='$starttime' and c.starttime_num<='$endtime') or (c.endtime_num>='$starttime' and c.endtime_num<='$endtime') or (c.starttime_num<='$starttime' and c.endtime_num>='$endtime')) and c.day ='$day' and c.month = '$month' and c.year ='$year' and (c.response like '%Y%' or c.response ='')
					) and a.rating = 3 limit 0, $num																
					";				
		
		//echo $sql;
		$query = $this->db->query($sql);
		$temp=$query->result_array();
		$tot=count($temp);
		if($tot< $num && $tot > 0)
		{
			foreach($temp as $t)
			{
				$staff[]=$t['id'];
			}
		}
		$dif=$num-$tot;
		if($dif > 0)
		{
			$sql=$sql1;
			$sql .= 	" a.group like '%~$position~%' and
						a.status like '%approved%' and
						
						b.venue_id = '$venue_id' and					
						(a.availability = '1' or a.availability = '$orderday') and
						a.id not in (
							select c.staff_id from job_staff c where c.job_calendar_id = '$job_calendar_id' and (c.response like '%Y%' or c.response ='')
						) and
						a.id not in (
							select c.staff_id from job_staff c where ((c.starttime_num>='$starttime' and c.starttime_num<='$endtime') or (c.endtime_num>='$starttime' and c.endtime_num<='$endtime') or (c.starttime_num<='$starttime' and c.endtime_num>='$endtime')) and c.day ='$day' and c.month = '$month' and c.year ='$year' and (c.response like '%Y%' or c.response ='')
						) and a.rating = 2	limit 0, $dif														
						";		
			$query = $this->db->query($sql);
			$temp=$query->result_array();
			$tot=count($temp);
			if($tot< $num && $tot > 0)
			{
				foreach($temp as $t)
				{
					$staff[]=$t['id'];
				}
			}
			$dif=$num-$tot;
		}
		if($dif > 0)
		{
			$sql=$sql1;
			$sql .= 	" a.group like '%~$position~%' and
						a.status like '%approved%' and
						
						b.venue_id = '$venue_id' and					
						(a.availability = '1' or a.availability = '$orderday') and
						a.id not in (
							select c.staff_id from job_staff c where c.job_calendar_id = '$job_calendar_id' and (c.response like '%Y%' or c.response ='')
						) and
						a.id not in (
							select c.staff_id from job_staff c where ((c.starttime_num>='$starttime' and c.starttime_num<='$endtime') or (c.endtime_num>='$starttime' and c.endtime_num<='$endtime') or (c.starttime_num<='$starttime' and c.endtime_num>='$endtime')) and c.day ='$day' and c.month = '$month' and c.year ='$year' and (c.response like '%Y%' or c.response ='')
						) and a.rating = 1	limit 0, $dif														
						";		
			$query = $this->db->query($sql);
			$temp=$query->result_array();
			$tot=count($temp);
			if($tot< $num && $tot > 0)
			{
				foreach($temp as $t)
				{
					$staff[]=$t['id'];
				}
			}
			$dif=$num-$tot;
		}
		if($dif > 0)
		{
			$sql=$sql1;
			$sql .= 	" a.group like '%~$position~%' and
						a.status like '%approved%' and
						
						b.venue_id = '$venue_id' and					
						(a.availability = '1' or a.availability = '$orderday') and
						a.id not in (
							select c.staff_id from job_staff c where c.job_calendar_id = '$job_calendar_id' and (c.response like '%Y%' or c.response ='')
						) and
						a.id not in (
							select c.staff_id from job_staff c where ((c.starttime_num>='$starttime' and c.starttime_num<='$endtime') or (c.endtime_num>='$starttime' and c.endtime_num<='$endtime') or (c.starttime_num<='$starttime' and c.endtime_num>='$endtime')) and c.day ='$day' and c.month = '$month' and c.year ='$year' and (c.response like '%Y%' or c.response ='')
						) and a.rating = 0	limit 0, $dif														
						";		
			$query = $this->db->query($sql);
			$temp=$query->result_array();
			$tot=count($temp);
			if($tot< $num && $tot > 0)
			{
				foreach($temp as $t)
				{
					$staff[]=$t['id'];
				}
			}
			$dif=$num-$tot;
		}
		
		return $query->result_array();


$staffs = $this->Autosearch_model->look_staff('', $data_job['venue'], $venue['location'], $id, $orderday, $start_num, $end_num, $data_job['day'], $data_job['month'], $data_job['year'], $data_job['position_id'],$num_unisex, $venue['state']);